RDBMS PROGRAM 18-BOOK TRIGGER



CREATE TABLE BOOKS(BOOKID INT PRIMARY KEY,BOOKNAME VARCHAR(25),AUTHOR VARCHAR(25),PUBLISHER VARCHAR(25));

CREATE TABLE BOOK_DEL(DATE_OF_DEL DATE,BOOKID INT,BOOKNAME VARCHAR(25));

INSERT INTO BOOKS VALUES(1001,'WINGSOFFIRE','APJ','MCG');
INSERT INTO BOOKS VALUES(1002,'PROGRAMMING','BALAGURU','TATA');

CREATE OR REPLACE TRIGGER ONDELETE 
BEFORE DELETE ON BOOKS 
FOR EACH ROW 
BEGIN
INSERT INTO BOOK_DEL VALUES(SYSDATE,:OLD.BOOKID,:OLD.BOOKNAME);
END;

DECLARE
BID INT;
BEGIN
BID:=&BOOK_TO_BE_DELETED;
DELETE FROM BOOKS WHERE BOOKID=BID;
IF SQL%NOTFOUND THEN 
DBMS_OUTPUT.PUT_LINE('BOOK NOT FOUND');
ELSE
DBMS_OUTPUT.PUT_LINE('BOOK DELETED');
END IF;
END;